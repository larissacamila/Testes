<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Roleta Europeia â€“ Cassino Mobile</title>
<style>
body{margin:0;background:radial-gradient(circle,#0c4b3a,#021a12);font-family:Arial;color:white;}
h1{text-align:center;margin:10px 0}
#topo{text-align:center;}
#saldo{font-size:20px;margin-bottom:6px;}
canvas{display:block;margin:auto;}
button{padding:12px 30px;font-size:18px;background:gold;border:none;border-radius:12px;cursor:pointer;}
#resultado{text-align:center;margin:10px;font-size:18px;}
#historico{background:#0008;margin:10px auto;padding:8px 12px;width:90%;max-width:320px;border-radius:8px;max-height:120px;overflow-y:auto;font-size:14px;}
#mesa{margin:10px;padding:10px;background:#0a5a3c;border-radius:12px;box-shadow:inset 0 0 15px #000;}
#opcoes{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;}
.aposta{padding:18px 0;text-align:center;font-size:18px;font-weight:bold;border-radius:8px;cursor:pointer;border:2px solid transparent;user-select:none;}
.aposta.red{background:#b00000}
.aposta.black{background:#000}
.aposta.green{background:#006400}
.aposta.selecionada{border:2px solid gold;box-shadow:0 0 10px gold;}
#controle{margin-top:10px;display:flex;justify-content:center;gap:10px;}
input{width:90px;padding:6px;font-size:16px;border-radius:6px;border:none;}
</style>
</head>
<body>

<h1>ðŸŽ° Roleta Europeia</h1>

<div id="topo">
  <div id="saldo">Saldo: R$ <span id="saldoValor">1000</span></div>
  <canvas id="c" width="320" height="320"></canvas>
  <button id="btnStart" onclick="startCassino()">MÃºsicaðŸŽµ</button>
  <button onclick="girar()">GIRAR</button>
</div>

<div id="resultado"></div>
<div id="historico"><b>HistÃ³rico:</b></div>

<div id="mesa">
  <div id="opcoes">
    <div class="aposta red selecionada" onclick="selecionar('red',this)">VERMELHO</div>
    <div class="aposta black" onclick="selecionar('black',this)">PRETO</div>
    <div class="aposta green" onclick="selecionar('green',this)">ZERO (0)</div>
  </div>
  <div id="controle">
    <input id="valorAposta" type="number" value="100" min="10" step="10">
  </div>
</div>

<!-- MÃºsica e sons -->
<audio id="bgMusic" src="jogo2.mp3" loop></audio>
<audio id="spinSound" src="auuuu.mp3"></audio>
<audio id="winSound" src="parabÃ©ns.mp3"></audio>
<audio id="loseSound" src="quepena.mp3"></audio>

<script>
const canvas=document.getElementById("c");
const ctx=canvas.getContext("2d");
const cx=160,cy=160;
const R_RODA=135;
const R_EXT=R_RODA-12;
const R_INT=R_RODA-28;
const FATIA=2*Math.PI/37;
const OFFSET=-Math.PI/2;

const numeros=[0,32,15,19,4,21,2,25,17,34,6,27,13,36,11,30,8,23,10,5,24,16,33,1,20,14,31,9,22,18,29,7,28,12,35,3,26];
// cores corretas da roleta Europeia
const coresMap = {
0:'green',32:'red',15:'black',19:'red',4:'black',21:'red',2:'black',25:'red',17:'black',34:'red',
6:'black',27:'red',13:'black',36:'red',11:'black',30:'red',8:'black',23:'red',10:'black',5:'red',
24:'black',16:'red',33:'black',1:'red',20:'black',14:'red',31:'black',9:'red',22:'black',18:'red',
29:'black',7:'red',28:'black',12:'red',35:'black',3:'red',26:'black'
};
const cores=numeros.map(n=>coresMap[n]);

let angR=0,angB=0,rB=R_EXT;
let girando=false;
let saldo=1000;
let historicoArr=[];
let apostaTipo="red";
let apostaValor=100;

const bgMusic=document.getElementById("bgMusic");
const spinSound=document.getElementById("spinSound");
const winSound=document.getElementById("winSound");
const loseSound=document.getElementById("loseSound");

function startCassino(){
  bgMusic.play();
  document.getElementById("btnStart").style.display="none";
}

function selecionar(tipo,el){
  apostaTipo=tipo;
  document.querySelectorAll(".aposta").forEach(a=>a.classList.remove("selecionada"));
  el.classList.add("selecionada");
}

function normaliza(a){return (a%(2*Math.PI)+2*Math.PI)%(2*Math.PI);}
function indicePelaBola(){return Math.floor(normaliza(angB-angR-OFFSET)/FATIA);}

function desenhar(){
  ctx.clearRect(0,0,320,320);
  for(let i=0;i<numeros.length;i++){
    ctx.beginPath();
    ctx.moveTo(cx,cy);
    ctx.arc(cx,cy,R_RODA,OFFSET+angR+i*FATIA,OFFSET+angR+(i+1)*FATIA);
    ctx.fillStyle=cores[i]; ctx.fill(); ctx.strokeStyle="#222"; ctx.stroke();
    ctx.save();
    ctx.translate(cx,cy);
    ctx.rotate(OFFSET+angR+i*FATIA+FATIA/2);
    ctx.fillStyle="white";
    ctx.font="14px Arial";
    ctx.textAlign="right";
    ctx.fillText(numeros[i],R_RODA-10,5);
    ctx.restore();
  }
  const bx=cx+Math.cos(angB)*rB;
  const by=cy+Math.sin(angB)*rB;
  ctx.beginPath(); ctx.arc(bx,by,6,0,2*Math.PI); ctx.fillStyle="white"; ctx.fill();
  ctx.beginPath(); ctx.moveTo(cx,5); ctx.lineTo(cx-10,30); ctx.lineTo(cx+10,30); ctx.fillStyle="gold"; ctx.fill();
}

function girar(){
  if(girando) return;
  apostaValor=parseInt(document.getElementById("valorAposta").value);
  if(apostaValor>saldo||apostaValor<=0){alert("Aposta invÃ¡lida");return;}
  saldo-=apostaValor; document.getElementById("saldoValor").innerText=saldo;
  document.getElementById("resultado").innerHTML=""; girando=true;

  spinSound.currentTime=0; spinSound.play();

  const alvo=Math.floor(Math.random()*numeros.length);
  const voltas=Math.random()*5+6;
  const destino=(2*Math.PI*voltas)-(alvo*FATIA)-FATIA/2-OFFSET;

  const t0=performance.now(); const T=4800;
  const ar0=angR,ab0=angB;

  function animar(t){
    let p=(t-t0)/T;if(p>1)p=1;
    const e=1-Math.pow(1-p,3);

    angR=ar0+(destino-ar0)*e;
    angB=ab0-e*(2*Math.PI*voltas+alvo*FATIA);
    rB=p>0.78?R_EXT-(R_EXT-R_INT)*(1-Math.pow(1-(p-0.78)/0.22,2)):R_EXT;

    desenhar();

    if(p<1) requestAnimationFrame(animar);
    else{ rB=R_INT; const idx=indicePelaBola(); finalizar(idx); girando=false; }
  }
  requestAnimationFrame(animar);
}

function finalizar(idx){
  const n=numeros[idx],cor=cores[idx];
  let ganho=0;
  if(apostaTipo===cor) ganho=apostaValor*2;
  if(apostaTipo==="green"&&n===0) ganho=apostaValor*14;
  saldo+=ganho;
  document.getElementById("saldoValor").innerText=saldo;

  historicoArr.unshift(`N: ${n} | C: ${cor} | R$ ${ganho}`);
  if(historicoArr.length>8) historicoArr.pop();
  document.getElementById("historico").innerHTML="<b>HistÃ³rico:</b><br>"+historicoArr.join("<br>");

  document.getElementById("resultado").innerHTML=`ðŸŽ¯ NÃºmero: <b>${n}</b> | Cor: <b>${cor}</b><br>ðŸ’° Retorno: <b>R$ ${ganho}</b>`;

  if(ganho>0){winSound.currentTime=0;winSound.play();}
  else{loseSound.currentTime=0;loseSound.play();}
}

desenhar();
</script>
</body>
</html>
