<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸŽ° CaÃ§a-NÃ­quel 4x4</title>

<style>
body{
  margin:0;
  background:#0b0b0b;
  color:#fff;
  font-family:Arial, Helvetica, sans-serif;
  display:flex;
  flex-direction:column;
  align-items:center;
}

h1{
  margin:15px;
  color:#ffb300;
}

#saldo{
  margin-bottom:10px;
  font-size:18px;
}

#slot{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:8px;
  width:90vw;
  max-width:360px;
  background:#1c1c1c;
  padding:10px;
  border-radius:15px;
  box-shadow:0 0 20px #000;
}

.celula{
  background:#000;
  border-radius:10px;
  display:flex;
  align-items:center;
  justify-content:center;
  height:70px;
}

.celula img{
  width:60px;
  height:60px;
}

button{
  margin-top:15px;
  padding:12px 30px;
  font-size:18px;
  border:none;
  border-radius:30px;
  background:linear-gradient(45deg,#ff9800,#ff5722);
  color:#fff;
  cursor:pointer;
}

button:active{
  transform:scale(0.95);
}

#msg{
  margin-top:10px;
  min-height:24px;
  color:#00ffcc;
}
</style>
</head>

<body>

<h1>ðŸŽƒ CaÃ§a-NÃ­quel 4Ã—4</h1>

<div id="saldo">Saldo: R$ <span id="valorSaldo">1000</span></div>

<div id="slot"></div>

<button onclick="girar()">GIRAR</button>

<div id="msg"></div>

<script>
let saldo = 1000;
const aposta = 50;

// ðŸ”® SÃ­mbolos (adicione quantos quiser)
const simbolos = [
  { img:"img/pumpkin.png", peso:40 },
  { img:"img/skull.png", peso:30 },
  { img:"img/bat.png", peso:20 },
  { img:"img/candy.png", peso:15 },
  { img:"img/diamond.png", peso:5 }
];

// Cria o grid 4x4
const slot = document.getElementById("slot");
const celulas = [];

for(let i=0;i<16;i++){
  const d = document.createElement("div");
  d.className="celula";
  const img = document.createElement("img");
  d.appendChild(img);
  slot.appendChild(d);
  celulas.push(img);
}

// Sorteio ponderado (RTP controlÃ¡vel)
function sorteiaSimbolo(){
  const totalPeso = simbolos.reduce((s,a)=>s+a.peso,0);
  let r = Math.random()*totalPeso;
  for(const s of simbolos){
    if(r < s.peso) return s.img;
    r -= s.peso;
  }
  return simbolos[0].img;
}

function girar(){
  if(saldo < aposta){
    document.getElementById("msg").innerText="âŒ Saldo insuficiente";
    return;
  }

  saldo -= aposta;
  document.getElementById("valorSaldo").innerText = saldo;
  document.getElementById("msg").innerText="Girando...";

  let giros = 0;
  const anim = setInterval(()=>{
    celulas.forEach(c=>{
      c.src = sorteiaSimbolo();
    });
    giros++;
    if(giros > 15){
      clearInterval(anim);
      verificarPremio();
    }
  },100);
}

function verificarPremio(){
  // Exemplo simples: linha cheia igual
  const grid = celulas.map(c=>c.src);
  let ganhou = false;

  for(let l=0;l<4;l++){
    const base = grid[l*4];
    if(
      grid[l*4+1]===base &&
      grid[l*4+2]===base &&
      grid[l*4+3]===base
    ){
      ganhou = true;
    }
  }

  if(ganhou){
    saldo += 300;
    document.getElementById("msg").innerText="ðŸŽ‰ LINHA COMPLETA! +300";
  }else{
    document.getElementById("msg").innerText="ðŸ˜ˆ A banca venceu";
  }

  document.getElementById("valorSaldo").innerText = saldo;
}
</script>

</body>
</html>
