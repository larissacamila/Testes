<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸƒ Jogo 21</title>

<style>
body{
  margin:0;
  background:radial-gradient(circle,#004d2a,#001a0f);
  color:#fff;
  font-family:Arial,Helvetica,sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
}

.game{
  width:95%;
  max-width:380px;
  background:rgba(0,0,0,.85);
  padding:16px;
  border-radius:16px;
  box-shadow:0 0 25px #000;
}

h1{text-align:center;color:gold}

.hand{
  margin:10px 0;
}

.card{
  display:inline-block;
  background:#fff;
  color:#000;
  width:45px;
  height:60px;
  margin:4px;
  border-radius:6px;
  font-size:18px;
  font-weight:bold;
  text-align:center;
  line-height:60px;
}

button{
  width:100%;
  margin-top:10px;
  padding:12px;
  font-size:18px;
  border:none;
  border-radius:12px;
  background:gold;
  font-weight:bold;
}

#msg{text-align:center;margin-top:10px}
</style>
</head>

<body>

<div class="game">
  <h1>ğŸƒ Jogo 21</h1>

  <div>Saldo: R$ <span id="saldo">1000</span></div>

  <div class="hand">
    <b>VocÃª:</b>
    <div id="player"></div>
    <div>Total: <span id="pontosJogador">0</span></div>
  </div>

  <div class="hand">
    <b>Banca:</b>
    <div id="dealer"></div>
    <div>Total: <span id="pontosBanca">?</span></div>
  </div>

  <button onclick="comprar()">Comprar Carta</button>
  <button onclick="parar()">Parar</button>

  <div id="msg"></div>
</div>

<script>
let saldo = 1000;
const aposta = 50;

let baralho = [];
let jogador = [];
let banca = [];

function criarBaralho(){
  baralho = [];
  const valores = [2,3,4,5,6,7,8,9,10,10,10,10,11]; // J,Q,K=10 A=11
  for(let i=0;i<4;i++){
    valores.forEach(v=>baralho.push(v));
  }
  baralho.sort(()=>Math.random()-0.5);
}

function comprarCarta(){
  return baralho.pop();
}

function total(mao){
  let t = mao.reduce((a,b)=>a+b,0);
  while(t>21 && mao.includes(11)){
    mao[mao.indexOf(11)] = 1;
    t = mao.reduce((a,b)=>a+b,0);
  }
  return t;
}

function iniciar(){
  criarBaralho();
  jogador = [comprarCarta(), comprarCarta()];
  banca = [comprarCarta()];
  atualizar();
  msg("");
}

function atualizar(){
  document.getElementById("player").innerHTML =
    jogador.map(c=>`<div class="card">${c}</div>`).join("");
  document.getElementById("dealer").innerHTML =
    banca.map(c=>`<div class="card">${c}</div>`).join("");
  document.getElementById("pontosJogador").innerText = total(jogador);
}

function comprar(){
  jogador.push(comprarCarta());
  atualizar();
  if(total(jogador)>21){
    saldo-=aposta;
    fim("ğŸ’¥ Estourou! VocÃª perdeu");
  }
}

function parar(){
  while(total(banca)<17){
    banca.push(comprarCarta());
  }

  const pj = total(jogador);
  const pb = total(banca);

  document.getElementById("pontosBanca").innerText = pb;

  if(pb>21 || pj>pb){
    saldo+=aposta;
    fim("ğŸ‰ VocÃª ganhou!");
  }else{
    saldo-=aposta;
    fim("ğŸ˜ˆ A banca venceu");
  }
}

function fim(texto){
  document.getElementById("saldo").innerText = saldo;
  msg(texto);
  setTimeout(iniciar,2000);
}

function msg(t){
  document.getElementById("msg").innerText = t;
}

iniciar();
</script>

</body>
</html>
